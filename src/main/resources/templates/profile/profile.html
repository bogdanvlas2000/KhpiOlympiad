<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:insert="fragments::headerfiles">
</head>
<head>
    <link rel="stylesheet" href="/styles/content.css">
    <link rel="stylesheet" href="/styles/profile.css">
</head>
<body>
<div id="main" class="main">
    <div th:insert="fragments::topnav"></div>
    <div class="page">
        <h1>Profile page</h1>
        <div class="row_block" style="width: 100%">
            <div class="column_block">
                <div class="img_wrap">
                    <img th:if="${image}" th:src="'data:image/jpeg;base64,'+${image}">
                    <img th:unless="${image}" src="/img/profile.png">
                </div>
                <div th:text="${user.username}"></div>
                <div th:text="${user.email}"></div>
                <div><a href="/profile/psw_change">Change password</a></div>
            </div>
            <div class="column_block card_block" style="justify-content: space-between">
                <div>
                    <div th:if="${ready}">
                        <div th:text="${profile.name}"></div>
                        <div th:text="${university}"></div>
                        <div th:text="${city}"></div>
                        <div th:text="${profile.age}"></div>
                        <div th:text="${profile.gender}"></div>
                    </div>
                    <div th:if="${not_ready}">
                        You should complete profile info
                    </div>
                </div>
                <div>
                    <form action="/profile/edit">
                        <button class="b1">Edit profile info <i class="fa fa-user"></i></button>
                    </form>
                </div>
            </div>
        </div>
        <h1>My events</h1>
        <div class="column_block" style="width: 100%">
            <table>
                <thead>
                <th>Event</th>
                <th>Date</th>
                </thead>
                <tbody>
                <tr th:each="event:${user.events}">
                    <td>
                        <a th:href="@{/events/{id}(id=${event.id})}" th:text="${event.title}"></a>
                    </td>
                    <td th:text="${event.createdDate.toLocalDate()}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>